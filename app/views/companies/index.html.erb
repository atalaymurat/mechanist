<p id="notice"><%= notice %></p>

<h1>Companies</h1>
<div class="table-responsive">
<table class="table table-hover table-striped w-auto">
  <thead>
    <tr>
      <th scope="col">Id</th>
      <th scope="col">Logo</th>
      <th scope="col">Name</th>
      <th scope="col">Email</th>
      <th scope="col">Url</th>
      <th scope="col">People</th>
      <th scope="col">Created by</th>
      <th scope="col" colspan="2"></th>
    </tr>
  </thead>            

  <tbody>
    <% @companies.order(:id).reverse.each do |company| %>
      <tr>
        <td><%= company.id %></td>
        <td><%= image_tag company.logo_url(:logo) if company.logo? %></td>
        <td><%= link_to company.name.capitalize, company %></td>
        <td><%= company.email %></td>
        <td><%= company.url %></td>
        <td><% company.people.each do |person|  %>
          <div> <%= link_to person.first_name.capitalize, person %> </div>
            <% end %>
        </td>
         <td><%= company.user.username %></td>
            <td><%= link_to 'Edit', edit_company_path(company), class: 'btn btn-outline-primary btn-sm' if policy(company).update? %></td>
            <td><%= link_to 'Destroy', company, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-outline-danger btn-sm' if policy(company).destroy? %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>

<%= link_to 'New Company', new_company_path, class: 'btn btn-primary mt-2' %>
